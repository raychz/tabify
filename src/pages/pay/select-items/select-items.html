<ion-header>
  <ion-navbar color='tabify'>
    <ion-title>Select Items</ion-title>
    <ion-buttons end>
      <button ion-button icon-end (click)="viewTotals()">
        Next
        <ion-icon name="arrow-forward"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content class='cards-bg'>
  <ion-card *ngFor='let item of receiptItems' [class.item-on-tab]='isItemOnMyTab(item)'>
    <ion-item>
      <h2>{{item.name}}</h2>
      <ion-note item-end>
        <h2>${{item.price | number:'1.2-2'}}</h2>
      </ion-note>
    </ion-item>
    <ion-card-content>
      <p>{{item.payersDescription}}</p>
      <ng-container *ngIf='item.payers.length > 1'>
        <p *ngFor='let payer of item.payers'>
          {{payer.firstName}}: ${{payer.price | number:'1.2-2'}}
        </p>
      </ng-container>
    </ion-card-content>
    <ion-row>
      <ion-col align-self-center text-center>
        <button *ngIf='!isItemOnMyTab(item)' ion-button color='primary' clear block icon-start (click)='addItemToMyTab(item)'>
          <ion-icon name='add-circle'></ion-icon>
          Add to My Tab
        </button>
        <button *ngIf='isItemOnMyTab(item)' ion-button color='danger' clear block icon-start (click)='removeItemFromMyTab(item)'>
          <ion-icon name='remove-circle'></ion-icon>
          Remove From My Tab
        </button>
      </ion-col> 
    </ion-row>
  </ion-card>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-title>
      Your Subtotal
      <p class='subtitle'>$54.32</p>
    </ion-title>
  </ion-toolbar>
</ion-footer>
