<ion-header>
    <ion-navbar>
        <ion-title>Login With Email</ion-title>
    </ion-navbar>
</ion-header>

<ion-content>
    <ion-grid>
        <ion-row>
            <ion-col>
                <form (ngSubmit)="login()" [formGroup]="loginForm">
                    <ion-list inset>
                        <ion-item [ngClass]="{ invalid: emailErrors.hasError('*', ['touched', 'dirty']) }">
                            <ion-input type="text" placeholder="Email" formControlName="email"></ion-input>
                        </ion-item>
                        <div ngxErrors="email" #emailErrors="ngxErrors">
                            <div [ngxError]="['email', 'required']" [when]="['dirty']">Enter a valid email</div>
                        </div>
                        <ion-item [ngClass]="{ invalid: passwordErrors.hasError('*', ['touched', 'dirty']) }">
                            <ion-input type="password" placeholder="Password" formControlName="password"></ion-input>
                        </ion-item>
                        <div ngxErrors="password" #passwordErrors="ngxErrors">
                            <div [ngxError]="['minlength', 'required']" [when]="['dirty']">Password must have at least 6 characters</div>
                        </div>
                    </ion-list>

                    <div padding-horizontal>
                        <div class="form-error">{{loginError}}</div>
                        <button ion-button block type="submit" [disabled]="!loginForm.valid">Login</button>
                        <button ion-button block outline (click)="forgotPassword()">Forgot Password?</button>
                        <div *ngIf="loginError" class="login-footer">
                            <p>If you're a new user, please sign up.</p>
                        </div>
                    </div>
                </form>
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-content>
